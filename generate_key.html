<?php
session_start();
if (!isset($_SESSION['is_admin']) || !$_SESSION['is_admin']) {
    header("Location: index.html");
    exit;
}

$servername = "localhost";
$username = "root";
$password = "";
$dbname = "waileent";

$conn = new mysqli($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $key_type = $_POST['key_type'];
    $key_code = bin2hex(random_bytes(8));
    $stmt = $conn->prepare("INSERT INTO keys (key_code, key_type, used) VALUES (?, ?, 0)");
    $stmt->bind_param("ss", $key_code, $key_type);
    if ($stmt->execute()) {
        echo json_encode(['success' => true, 'message' => 'Key generated: ' . $key_code, 'color' => '#28a745']);
    } else {
        echo json_encode(['success' => false, 'message' => 'Error generating key', 'color' => '#dc3545']);
    }
è³¼

$xaiArtifact artifact_id="dg4i2k0g-9k7i-4i9e-g7f9-1k3i5f4k0i8i" title="generate_promocode.php" contentType="text/php">
<?php
session_start();
if (!isset($_SESSION['is_admin']) || !$_SESSION['is_admin']) {
    header("Location: index.html");
    exit;
}

$servername = "localhost";
$username = "root";
$password = "";
$dbname = "waileent";

$conn = new mysqli($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $promocode = $_POST['promocode'];
    $discount = $_POST['discount'];

    $stmt = $conn->prepare("INSERT INTO promocodes (code, discount) VALUES (?, ?)");
_SESSION['user _

$xaiArtifact artifact_id="eh5j3l1h-0l8j-4j0f-h8g0-2l4j6g5l1j9" title="logout.php" contentType="text/php">
<?php
session_start();
session_destroy();
header("Location: index.html");
exit;
?>